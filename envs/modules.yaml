modules:
  default:
    arch_folder: false
    enable:
    - lmod
    lmod:
      projections:
        nlohmann-json: 'json/{version}'
      blacklist:
      # List of packages for which we don't need modules
      - berkeley-db
      - bison
      - bzip2
      - curl
      - diffutils
      - expat
      - findutils
      - flex
      - gdbm
      - hwloc
      - libaec
      - libedit
      - libevent
      - libfabric
      - libiconv
      - libjpeg-turbo
      - libpciaccess
      - libsigsegv
      - libxml
      - libxml2
      - lz4
      - m4
      - nasm
      - ncurses
      - openssh
      - openssl
      - perl
      - pkgconf
      - readline
      - xz
      # Do not create MPI modules - we create our own meta modules
      - mpich
      - openmpi
      - intel-mpi
      - intel-oneapi-mpi
      # Do not create python modules - we create our own meta modules
      - python

      hash_length: 0

      all:
        environment:
          set:
            '{name}_ROOT': '{prefix}'
            
      esmf:
        environment:
          set:
            'ESMFMKFILE': '{prefix}/lib/esmf.mk'

      libpng:
        environment:
          set:
            'PNG_ROOT': '{prefix}'

      hierarchy:
      - mpi
      #core_specs:
      #- python

    prefix_inspections:
      bin:
      - PATH
      man:
      - MANPATH
      share/man:
      - MANPATH
      share/aclocal:
      - ACLOCAL_PATH
      lib:
      - LIBRARY_PATH
      - LD_LIBRARY_PATH
      lib64:
      - LIBRARY_PATH
      - LD_LIBRARY_PATH
      include:
      - CPATH
      lib/pkgconfig:
      - PKG_CONFIG_PATH
      lib64/pkgconfig:
      - PKG_CONFIG_PATH
      '':
      - CMAKE_PREFIX_PATH
