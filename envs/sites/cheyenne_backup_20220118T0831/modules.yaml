modules:
  default:
    lmod:
      core_compilers::
      #- intel-oneapi-compilers@2021.2.0
      #- intel@2021.2.0
      #- gcc@11.1.0
      - gcc@4.8.5

#      intel-oneapi-compilers:
#        environment:
#          prepend_path:
#            PATH: '/glade/u/apps/ch/opt/ncarcompilers/0.5.0/intel/2021.2:/glade/u/apps/ch/opt/ncarcompilers/0.5.0/intel/2021.2/mpi'
#            LD_LIBRARY_PATH: '/glade/u/apps/opt/intel/2021.2/compiler/2021.2.0/linux/compiler/lib/intel64_lin'
#          set:
#            'NCAR_EXCLUDE_ASNEEDED': '1'
#            'NCAR_WRAPPER_MPI': '/glade/u/apps/ch/opt/ncarcompilers/0.5.0/intel/2021.2/mpi'

      intel-oneapi-mpi:
        environment:
          prepend_path:
            LD_LIBRARY_PATH: '/glade/u/apps/ch/opt/libfabric/1.12.1/gnu/9.1.0/lib'
          set:
            MPICC_CC:   'icc'
            MPICXX_CXX: 'icpc'
            MPIF90_F90: 'ifort'
            I_MPI_F90:  'ifort'
            I_MPI_FC:   'ifort'
            I_MPI_CC:   'icc'
            I_MPI_CXX:  'icpc'
            MPICC_CC:   'icc'
            I_MPI_HYDRA_BOOTSTRAP:      'rsh'
            I_MPI_HYDRA_BOOTSTRAP_EXEC: 'pbs_tmrsh'
            I_MPI_HYDRA_BRANCH_COUNT:   '-1'

      intel-mpi:
        environment:
          prepend_path:
            LD_LIBRARY_PATH: '/glade/u/apps/ch/opt/libfabric/1.12.1/gnu/9.1.0/lib'
          set:
            MPICC_CC:   'icc'
            MPICXX_CXX: 'icpc'
            MPIF90_F90: 'ifort'
            I_MPI_F90:  'ifort'
            I_MPI_FC:   'ifort'
            I_MPI_CC:   'icc'
            I_MPI_CXX:  'icpc'
            MPICC_CC:   'icc'
            I_MPI_HYDRA_BOOTSTRAP:      'rsh'
            I_MPI_HYDRA_BOOTSTRAP_EXEC: 'pbs_tmrsh'
            I_MPI_HYDRA_BRANCH_COUNT:   '-1'

#      gcc:
#        environment:
#          prepend_path:
#            PATH: '/glade/u/apps/ch/opt/ncarcompilers/0.5.0/gnu/11.1.0:/glade/u/apps/ch/opt/ncarcompilers/0.5.0/gnu/11.1.0/mpi'
#          set:
#            'NCAR_EXCLUDE_ASNEEDED': '1'
#            'NCAR_WRAPPER_MPI': '/glade/u/apps/ch/opt/ncarcompilers/0.5.0/gnu/11.1.0/mpi'
