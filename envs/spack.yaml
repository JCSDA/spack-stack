spack:
  concretization: separately
  view: false

  include:
  - $spack/../envs/modules.yaml
  - $spack/../envs/packages.yaml

  # Set package and module installation directories
  config:
    install_tree:
      root: $spack/../install
      projections:
        all: "${ARCHITECTURE}/${COMPILERNAME}-${COMPILERVER}/${PACKAGE}-${VERSION}"
    module_roots:
      lmod: $spack/../install/modulefiles
    build_jobs: 20

  # Set compiler array
  definitions:
  - compilers: [apple-clang@13.0.0]
  - packages:
    - zlib
    - mpich
    - hdf5
    - netcdf-c
    - netcdf-fortran
    - libjpeg
    - libpng
    - jasper
    - esmf
    - fms
    - bacio
    - sigio
    - sfcio
    - gfsio
    - w3nco
    - w3emc
    - sp
    - ip
    - ip2
    - landsfcutil
    - nemsio
    - nemsiogfs
    - g2
    - g2c
    - g2tmpl
    - crtm
    - upp
    - wrf-io
    - wgrib2
    - prod-util
    - grib-util

  specs:
  - matrix:
    - [$%compilers]
    - [$packages]
