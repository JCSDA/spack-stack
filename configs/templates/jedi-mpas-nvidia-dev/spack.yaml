# The intent of this template is to "clone" the stack available on WCOSS2
# insofar as needed to support the UFS Weather Model.
# Version numbers are taken from ufs-weather-model/modulefiles/ufs_wcoss2.lua
# Updated Jan 2024 by Alex Richert
spack:
  concretizer:
    unify: when_possible
  view: false
  include:
  - site
  - common

  specs:

  # Externals or gcc-built packages
  - cmake
  - git
  - git-lfs
  - wget
  - curl
  - pkg-config %gcc
  - python

  # Packages built with nvhpc
  - zlib-api %nvhpc
  - hdf5 %nvhpc
  - netcdf-c %nvhpc ~blosc ~dap ~zstd
  - netcdf-fortran %nvhpc
  - parallel-netcdf %nvhpc
  - parallelio %nvhpc
  #- nccmp

  - blas
  - boost %nvhpc
    #- bufr
  - ecbuild %nvhpc
    #- eccodes
  - eckit %nvhpc
  - ecmwf-atlas %nvhpc
  - fckit %nvhpc
    # Currently using openblas, would be nice if we could use the nvhpc package/provider for this
  - fftw-api
    # Doesn't build with nvhpc:
    #- gsibec
  - gsl-lite %nvhpc
  - jedi-cmake %nvhpc
    #- nlohmann-json
    #- nlohmann-json-schema-validator
    #- odc
  - sp %nvhpc
  - udunits %nvhpc
  - jasper %nvhpc
